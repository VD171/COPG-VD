#!/system/bin/sh

# Get device's CPU architecture
ARCH=$(getprop ro.product.cpu.abi)

# Path to the module's binaries
MODDIR=${0%/*}  # If installed via Magisk, this resolves to the module dir
BIN_DIR="$MODDIR/common/bin"

# Choose the correct binary based on architecture
if [ "$ARCH" = "arm64-v8a" ]; then
    exec "$BIN_DIR/arm64-v8a/jq" "$@"
elif [ "$ARCH" = "armeabi-v7a" ]; then
    exec "$BIN_DIR/armeabi-v7a/jq" "$@"
else
    echo "Unsupported CPU architecture: $ARCH"
    exit 1
fi
